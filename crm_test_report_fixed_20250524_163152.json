{
  "tests": [
    {
      "test": "SUPABASE_URL",
      "status": "PASS",
      "message": "Found: https://jq...",
      "timestamp": "2025-05-24T16:31:11.305468"
    },
    {
      "test": "SUPABASE_ANON_KEY",
      "status": "PASS",
      "message": "Found: eyJhbGciOi...",
      "timestamp": "2025-05-24T16:31:11.305468"
    },
    {
      "test": "OPENAI_API_KEY",
      "status": "PASS",
      "message": "Found: sk-proj-wB...",
      "timestamp": "2025-05-24T16:31:11.305468"
    },
    {
      "test": "CALENDLY_ACCESS_TOKEN",
      "status": "PASS",
      "message": "Found: eyJraWQiOi...",
      "timestamp": "2025-05-24T16:31:11.305468"
    },
    {
      "test": "Supabase Client Init",
      "status": "PASS",
      "message": "Client created successfully",
      "timestamp": "2025-05-24T16:31:11.600380"
    },
    {
      "test": "Health Check",
      "status": "PASS",
      "message": "Database connection OK",
      "timestamp": "2025-05-24T16:31:12.384244"
    },
    {
      "test": "Basic Query",
      "status": "PASS",
      "message": "Query executed, found 1 leads",
      "timestamp": "2025-05-24T16:31:12.610193"
    },
    {
      "test": "Stats Query",
      "status": "PASS",
      "message": "Stats retrieved, total leads: 4, qualified: 4, contacted: 3, meetings: 4, conversations: 4 (active: 0)",
      "timestamp": "2025-05-24T16:31:13.935235"
    },
    {
      "test": "LeadAgent Init",
      "status": "PASS",
      "message": "Agent initialized",
      "timestamp": "2025-05-24T16:31:14.407682"
    },
    {
      "test": "LeadAgent Tools",
      "status": "PASS",
      "message": "Found 4 function calling tools",
      "timestamp": "2025-05-24T16:31:14.407682"
    },
    {
      "test": "OutboundAgent Init",
      "status": "PASS",
      "message": "Agent initialized",
      "timestamp": "2025-05-24T16:31:14.879704"
    },
    {
      "test": "OutboundAgent Tools",
      "status": "PASS",
      "message": "Found 3 function calling tools",
      "timestamp": "2025-05-24T16:31:14.880703"
    },
    {
      "test": "MeetingSchedulerAgent Init",
      "status": "PASS",
      "message": "Agent initialized",
      "timestamp": "2025-05-24T16:31:15.356109"
    },
    {
      "test": "MeetingSchedulerAgent Tools",
      "status": "PASS",
      "message": "Found 4 function calling tools",
      "timestamp": "2025-05-24T16:31:15.356109"
    },
    {
      "test": "Create Lead Operation",
      "status": "PASS",
      "message": "Lead created with ID: a47314c6-1077-4671-b99b-7df1a3c33cb8",
      "timestamp": "2025-05-24T16:31:16.139405"
    },
    {
      "test": "Get Lead Operation",
      "status": "PASS",
      "message": "Lead retrieved successfully",
      "timestamp": "2025-05-24T16:31:16.359098"
    },
    {
      "test": "Get Lead by Email",
      "status": "PASS",
      "message": "Lead found by email",
      "timestamp": "2025-05-24T16:31:16.590521"
    },
    {
      "test": "Mark Lead Qualified",
      "status": "PASS",
      "message": "Lead marked as qualified",
      "timestamp": "2025-05-24T16:31:16.817572"
    },
    {
      "test": "Delete Test Lead",
      "status": "PASS",
      "message": "Test lead cleaned up",
      "timestamp": "2025-05-24T16:31:17.037975"
    },
    {
      "test": "Agents System Init",
      "status": "PASS",
      "message": "Agents system initialized",
      "timestamp": "2025-05-24T16:31:18.814034"
    },
    {
      "test": "Complete Workflow",
      "status": "PASS",
      "message": "Lead ID: adeb9ece-b1d3-4a60-b52d-85d038b3acaf, Qualified: True",
      "timestamp": "2025-05-24T16:31:48.000031"
    },
    {
      "test": "Lead Qualification",
      "status": "PASS",
      "message": "Lead qualified successfully",
      "timestamp": "2025-05-24T16:31:48.000031"
    },
    {
      "test": "Outbound Contact",
      "status": "PASS",
      "message": "Message: No fue posible obtener la informaci\u00f3n del lead deb...",
      "timestamp": "2025-05-24T16:31:48.000031"
    },
    {
      "test": "Meeting Scheduling",
      "status": "PASS",
      "message": "Type: Sales Call, URL: https://calendly.com/your-company/sales-call-a162bdab",
      "timestamp": "2025-05-24T16:31:48.000031"
    },
    {
      "test": "Lead Persistence",
      "status": "PASS",
      "message": "Lead found in database: test.lead.20250524163118@testcompany.com",
      "timestamp": "2025-05-24T16:31:48.792849"
    },
    {
      "test": "Lead Status Update",
      "status": "PASS",
      "message": "Lead marked as qualified",
      "timestamp": "2025-05-24T16:31:48.792849"
    },
    {
      "test": "Contact Status Update",
      "status": "FAIL",
      "message": "Lead not marked as contacted",
      "timestamp": "2025-05-24T16:31:48.792849"
    },
    {
      "test": "Meeting Status Update",
      "status": "PASS",
      "message": "Meeting scheduled",
      "timestamp": "2025-05-24T16:31:48.793848"
    },
    {
      "test": "Conversation Creation",
      "status": "FAIL",
      "message": "No conversations found",
      "timestamp": "2025-05-24T16:31:49.018207"
    },
    {
      "test": "Test Lead Deletion",
      "status": "PASS",
      "message": "Test lead adeb9ece-b1d3-4a60-b52d-85d038b3acaf deleted",
      "timestamp": "2025-05-24T16:31:51.231087"
    },
    {
      "test": "Cleanup Verification",
      "status": "PASS",
      "message": "Test lead successfully removed",
      "timestamp": "2025-05-24T16:31:51.449384"
    },
    {
      "test": "Stats Consistency",
      "status": "PASS",
      "message": "Lead count updated: 5 -> 4",
      "timestamp": "2025-05-24T16:31:52.816656"
    }
  ],
  "summary": {
    "overall_status": "\u26a0\ufe0f WARNING",
    "total_passed": 30,
    "total_failed": 2,
    "failed_tests": [
      "   \u2022 Contact Status Update - Lead not marked as contacted",
      "   \u2022 Conversation Creation - No conversations found"
    ],
    "category_results": {
      "ENVIRONMENT": {
        "passed": true,
        "error": null
      },
      "DATABASE": {
        "passed": true,
        "error": null
      },
      "AGENTS": {
        "passed": true,
        "error": null
      },
      "SUPABASE_OPS": {
        "passed": true,
        "error": null
      },
      "WORKFLOW": {
        "passed": true,
        "error": null
      },
      "CLEANUP": {
        "passed": true,
        "error": null
      }
    }
  }
}